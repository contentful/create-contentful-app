name: 'Test build functions'
inputs:
  os:
    description: 'Operating system'
    required: false
    default: 'linux'
runs:
  using: 'composite'
  steps:
    - name: Test built functions (Unix)
      if: ${{ inputs.os }} == 'ubuntu-latest'
      shell: bash
      run: |
        FORMER_CWD="$(pwd)"
        PROJECT=test-$(date +%s)
        echo "skip in canary"

    - name: Test built functions (Windows)
      if: ${{ inputs.os }} == 'windows-latest'
      shell: pwsh
      run: |
        $FORMER_CWD = (Get-Location).Path
        $PROJECT = "test-" + [DateTimeOffset]::Now.ToUnixTimeSeconds()
        $TEMP_DIR = [System.IO.Path]::GetTempPath()
        $PROJECT_PATH = Join-Path $TEMP_DIR $PROJECT
        echo "skip in canary"
