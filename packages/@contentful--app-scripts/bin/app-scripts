#!/usr/bin/env node

const { program } = require('commander');
const { version } = require('../package.json');

const {createAppDefinition} = require('../')

function getCommand(program, command) {
  const {ci} = program.opts()
  return ci ? command.nonInteractive : command.interactive;
}

(async function main() {
  program
  .version(version)

  program
    .option('--ci', 'Execute in non-interactive mode', false)
  
  program
  .command('create-app-definition')
  .description('Create a new AppDefinition for an App')
  .action(() => {
    const command = getCommand(program, createAppDefinition);

    return command();
  })

  await program.parseAsync(process.argv);
})().catch(e => {
  console.error(e);
  // eslint-disable-next-line no-process-exit
  process.exit(1);
})